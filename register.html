<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Signup Form with Firebase</title>
    <link rel="stylesheet" href="./style.css">
    <style>
        /* Additional CSS for Snackbar */
        .snackbar {
            visibility: hidden;
            /* Hidden by default */
            min-width: 250px;
            /* Set a default minimum width */
            margin-left: -125px;
            /* Divide value of min-width by 2 */
            background-color: #333;
            /* Black background color */
            color: #fff;
            /* White text color */
            text-align: center;
            /* Centered text */
            border-radius: 2px;
            /* Rounded corners */
            padding: 16px;
            /* Padding */
            position: fixed;
            /* Sit on top of the screen */
            z-index: 1;
            /* Add a z-index if needed */
            left: 50%;
            /* Center the snackbar */
            bottom: 30px;
            /* 30px from the bottom */
        }

        .show {
            visibility: visible;
            /* Show the snackbar */
            /* Add animation: Take 0.5 seconds to fade in and out the snackbar */
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }

        /* Animations */
        @keyframes fadein {
            from {
                bottom: 0;
                opacity: 0;
            }

            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        @keyframes fadeout {
            from {
                bottom: 30px;
                opacity: 1;
            }

            to {
                bottom: 0;
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <section>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span>
        <span></span> <span></span> <span></span> <span></span>
        <div class="signin">
            <div class="content">
                <h2>Sign Up</h2>
                <div class="form">
                    <div class="inputBox">
                        <input type="text" id="name" required> <i>Name</i>
                    </div>
                    <div class="inputBox">
                        <input type="text" id="class" required> <i>Class</i>
                    </div>
                    <div class="inputBox">
                        <input type="text" id="section" required> <i>Section</i>
                    </div>
                    <div class="inputBox">
                        <input type="email" id="email" required> <i>Email</i>
                    </div>
                    <div class="inputBox">
                        <input type="password" id="password" required> <i>Password</i>
                    </div>
                    <div class="links"> <a href="reset-password.html">Forgot Password?</a> <a
                            href="login.html">Signin</a>

                    </div>
                    <div class="inputBox">
                        <input type="submit" value="Sign Up" id="signUpButton">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Snackbar Container -->
    <div id="snackbar" class="snackbar"></div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBkUEJyHkTu5lSSo53fK-ilI_elwc3frcY",
            authDomain: "arniko-1a977.firebaseapp.com",
            projectId: "arniko-1a977",
            storageBucket: "arniko-1a977.appspot.com",
            messagingSenderId: "394621812466",
            appId: "1:394621812466:web:cd24a51ca26c290ed41a6b",
            measurementId: "G-1N7B25PBM4"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Function to display snackbar notification
        function showSnackbar(message) {
            var snackbar = document.getElementById("snackbar");
            snackbar.textContent = message;
            snackbar.classList.add("show");
            setTimeout(function () { snackbar.classList.remove("show"); }, 3000);
        }

        // Add event listener to the signup button
        document.getElementById("signUpButton").addEventListener("click", async function () {
            var name = document.getElementById("name").value;
            var userClass = document.getElementById("class").value;
            var section = document.getElementById("section").value;
            var email = document.getElementById("email").value;
            var password = document.getElementById("password").value;

            try {
                // Sign up the user using Firebase's createUserWithEmailAndPassword method
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Send verification email
                await sendEmailVerification(user);

                // Save additional user data in Firestore
                await setDoc(doc(db, "users", user.uid), {
                    name: name,
                    class: userClass,
                    section: section,
                    email: email,
                    status: "user"
                });

                showSnackbar("Verification email sent. Please check your inbox.");

                // Redirect to login page
                setTimeout(() => {
                    window.location.href = "login.html";
                }, 3000);
            } catch (error) {
                // Show an error message
                alert(error.message);
            }
        });
    </script>
</body>

</html>